"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),o=t(e),n=t(require("react-dom"));function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}var i={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},a=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],l=function(t,e,o,n,r){var i=r.offsetX,a=r.offsetY,l=n?8:0,u=o.split(" "),c=e.height,s=e.width,f=t.top+t.height/2-c/2,d=t.left+t.width/2-s/2,p="",v="0%",m="0%";switch(u[0]){case"top":f-=c/2+t.height/2+l,p="rotate(180deg)  translateX(50%)",v="100%",m="50%";break;case"bottom":f+=c/2+t.height/2+l,p="rotate(0deg) translateY(-100%) translateX(-50%)",m="50%";break;case"left":d-=s/2+t.width/2+l,p=" rotate(90deg)  translateY(50%) translateX(-25%)",m="100%",v="50%";break;case"right":d+=s/2+t.width/2+l,p="rotate(-90deg)  translateY(-150%) translateX(25%)",v="50%"}switch(u[1]){case"top":f=t.top,v=t.height/2+"px";break;case"bottom":f=t.top-c+t.height,v=c-t.height/2+"px";break;case"left":d=t.left,m=t.width/2+"px";break;case"right":d=t.left-s+t.width,m=s-t.width/2+"px"}return{top:f="top"===u[0]?f-a:f+a,left:d="left"===u[0]?d-i:d+i,transform:p,arrowLeft:m,arrowTop:v}},u=0,c=e.forwardRef((function(t,c){var s=t.trigger,f=void 0===s?null:s,d=t.onOpen,p=void 0===d?function(){}:d,v=t.onClose,m=void 0===v?function(){}:v,h=t.defaultOpen,y=t.open,g=void 0===y?void 0:y,b=t.disabled,w=void 0!==b&&b,E=t.nested,k=void 0!==E&&E,x=t.closeOnDocumentClick,L=void 0===x||x,A=t.repositionOnResize,C=void 0===A||A,T=t.closeOnEscape,O=void 0===T||T,R=t.on,S=void 0===R?["click"]:R,X=t.contentStyle,P=void 0===X?{}:X,Y=t.arrowStyle,j=void 0===Y?{}:Y,z=t.overlayStyle,B=void 0===z?{}:z,I=t.className,D=void 0===I?"":I,M=t.position,N=void 0===M?"bottom center":M,q=t.modal,F=void 0!==q&&q,H=t.lockScroll,_=void 0!==H&&H,K=t.arrow,W=void 0===K||K,G=t.offsetX,J=void 0===G?0:G,Q=t.offsetY,U=void 0===Q?0:Q,V=t.mouseEnterDelay,Z=void 0===V?100:V,$=t.mouseLeaveDelay,tt=void 0===$?100:$,et=t.keepTooltipInside,ot=void 0!==et&&et,nt=t.children,rt=e.useState(g||void 0!==h&&h),it=rt[0],at=rt[1],lt=e.useRef(null),ut=e.useRef(null),ct=e.useRef(null),st=e.useRef(null),ft=e.useRef("popup-"+ ++u),dt=!!F||!f,pt=e.useRef(0);e.useLayoutEffect((function(){return it?(st.current=document.activeElement,At(),kt(),wt()):Et(),function(){clearTimeout(pt.current)}}),[it]),e.useEffect((function(){"boolean"==typeof g&&(g?vt():mt())}),[g,w]);var vt=function(){it||w||(at(!0),setTimeout(p,0))},mt=function(){it&&!w&&(at(!1),dt&&st.current.focus(),setTimeout(m,0))},ht=function(t){null==t||t.stopPropagation(),it?mt():vt()},yt=function(){clearTimeout(pt.current),pt.current=setTimeout(vt,Z)},gt=function(t){null==t||t.preventDefault(),ht()},bt=function(){clearTimeout(pt.current),pt.current=setTimeout(mt,tt)},wt=function(){dt&&_&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Et=function(){dt&&_&&(document.getElementsByTagName("body")[0].style.overflow="auto")},kt=function(){var t,e=null==ut||null===(t=ut.current)||void 0===t?void 0:t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(e)[0];null==o||o.focus()};e.useImperativeHandle(c,(function(){return{open:function(){vt()},close:function(){mt()},toggle:function(){ht()}}}));var xt,Lt,At=function(){if(!dt&&it&&(null==lt?void 0:lt.current)&&(null==lt?void 0:lt.current)&&(null==ut?void 0:ut.current)){var t,e,o=function(t,e,o,n,r,i){var u=r.offsetX,c=r.offsetY,s={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},f=0,d=function(t){var e={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof t){var o=document.querySelector(t);null!==o&&(e=o.getBoundingClientRect())}return e}(i),p=Array.isArray(o)?o:[o];for((i||Array.isArray(o))&&(p=[].concat(p,a));f<p.length;){var v={top:(s=l(t,e,p[f],n,{offsetX:u,offsetY:c})).top,left:s.left,width:e.width,height:e.height};if(!(v.top<=d.top||v.left<=d.left||v.top+v.height>=d.top+d.height||v.left+v.width>=d.left+d.width))break;f++}return s}(lt.current.getBoundingClientRect(),ut.current.getBoundingClientRect(),N,W,{offsetX:J,offsetY:U},ot);ut.current.style.top=o.top+window.scrollY+"px",ut.current.style.left=o.left+window.scrollX+"px",W&&ct.current&&(ct.current.style.transform=o.transform,ct.current.style.setProperty("-ms-transform",o.transform),ct.current.style.setProperty("-webkit-transform",o.transform),ct.current.style.top=(null===(t=j.top)||void 0===t?void 0:t.toString())||o.arrowTop,ct.current.style.left=(null===(e=j.left)||void 0===e?void 0:e.toString())||o.arrowLeft)}};void 0===(Lt=O)&&(Lt=!0),e.useEffect((function(){if(Lt){var t=function(t){"Escape"===t.key&&xt()};return document.addEventListener("keyup",t),function(){Lt&&document.removeEventListener("keyup",t)}}}),[xt=mt,Lt]),function(t,o){void 0===o&&(o=!0),e.useEffect((function(){if(o){var e=function(e){if(9===e.keyCode){var o,n=null==t||null===(o=t.current)||void 0===o?void 0:o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(n);if(1===r.length)return void e.preventDefault();var i=r[0],a=r[r.length-1];e.shiftKey&&document.activeElement===i?(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),i.focus())}};return document.addEventListener("keydown",e),function(){o&&document.removeEventListener("keydown",e)}}}),[t,o])}(ut,it&&dt),function(t,o){void 0===o&&(o=!0),e.useEffect((function(){if(o){var e=function(){t()};return window.addEventListener("resize",e),function(){o&&window.removeEventListener("resize",e)}}}),[t,o])}(At,C),function(t,o,n){void 0===n&&(n=!0),e.useEffect((function(){if(n){var e=function(e){var n=Array.isArray(t)?t:[t],r=!1;n.forEach((function(t){t.current&&!t.current.contains(e.target)||(r=!0)})),e.stopPropagation(),r||o()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){n&&(document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e))}}}),[t,o,n])}(f?[ut,lt]:[ut],mt,L&&!k);var Ct,Tt=function(){return o.createElement("div",Object.assign({},(t=dt?i.popupContent.modal:i.popupContent.tooltip,e={className:"popup-content "+(""!==D?D.split(" ").map((function(t){return t+"-content"})).join(" "):""),style:r({},t,P,{pointerEvents:"auto"}),ref:ut,onClick:function(t){t.stopPropagation()}},!F&&S.indexOf("hover")>=0&&(e.onMouseEnter=yt,e.onMouseLeave=bt),e),{key:"C",role:dt?"dialog":"tooltip",id:ft.current}),W&&!dt&&o.createElement("div",{ref:ct,style:i.popupArrow},o.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==D?D.split(" ").map((function(t){return t+"-arrow"})).join(" "):""),viewBox:"0 0 32 16",style:r({position:"absolute"},j)},o.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),nt&&"function"==typeof nt?nt(mt,it):nt);var t,e},Ot=!(S.indexOf("hover")>=0),Rt=dt?i.overlay.modal:i.overlay.tooltip,St=[Ot&&o.createElement("div",{key:"O","data-testid":"overlay","data-popup":dt?"modal":"tooltip",className:"popup-overlay "+(""!==D?D.split(" ").map((function(t){return t+"-overlay"})).join(" "):""),style:r({},Rt,B,{pointerEvents:L&&k||dt?"auto":"none"}),onClick:L&&k?mt:void 0,tabIndex:-1},dt&&Tt()),!dt&&Tt()];return o.createElement(o.Fragment,null,function(){for(var t={key:"T",ref:lt,"aria-describedby":ft.current},e=Array.isArray(S)?S:[S],n=0,r=e.length;n<r;n++)switch(e[n]){case"click":t.onClick=ht;break;case"right-click":t.onContextMenu=gt;break;case"hover":t.onMouseEnter=yt,t.onMouseLeave=bt;break;case"focus":t.onFocus=yt,t.onBlur=bt}if("function"==typeof f){var i=f(it);return!!f&&o.cloneElement(i,t)}return!!f&&o.cloneElement(f,t)}(),it&&n.createPortal(St,(null===(Ct=document.getElementById("popup-root"))&&((Ct=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(Ct)),Ct)))}));exports.Popup=c,exports.default=c;
//# sourceMappingURL=reactjs-popup.cjs.production.min.js.map
